<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Completa il Testo</title>
<style>
  .word {
    border: 1px solid #000;
    padding: 5px;
    cursor: pointer;
    display: inline-block;
    margin: 5px;
    background-color: #f9f9f9;
    user-select: none; /* Prevent text selection */
  }
  .blank {
    border: 2px solid #000; /* Thick border to increase sensitive area */
    min-width: 80px; /* Increased minimum width */
    min-height: 30px; /* Increased minimum height */
    display: inline-block;
    margin: 5px;
  }
  .dragging {
    opacity: 0.5; /* Visual feedback for dragging */
    position: absolute;
    z-index: 1000;
  }
</style>
<script>
  let currentDraggedElement = null;

  function allowDrop(event) {
    event.preventDefault();
  }

  function drag(event) {
    event.dataTransfer.setData("text", event.target.id);
    event.target.classList.add('dragging');
    currentDraggedElement = event.target;
  }

  function dragEnd(event) {
    event.target.classList.remove('dragging');
    currentDraggedElement = null;
  }

  function drop(event) {
    event.preventDefault();
    var data = event.dataTransfer.getData("text");
    var droppedElement = document.getElementById(data);
    var targetElement = event.target;

    if (targetElement.classList.contains('blank')) {
      targetElement.innerHTML = droppedElement.innerHTML;
      droppedElement.style.visibility = "hidden";
    }
    droppedElement.classList.remove('dragging');
  }

  function touchMove(event) {
    event.preventDefault();
    const touchLocation = event.targetTouches[0];
    if (currentDraggedElement) {
      currentDraggedElement.style.left = `${touchLocation.pageX - currentDraggedElement.offsetWidth / 2}px`;
      currentDraggedElement.style.top = `${touchLocation.pageY - currentDraggedElement.offsetHeight / 2}px`;
    }
  }

  function touchStart(event) {
    if (event.target.className.includes("word")) {
      currentDraggedElement = event.target;
      currentDraggedElement.classList.add('dragging');
      document.body.appendChild(currentDraggedElement);
    }
  }

  function touchEnd(event) {
    event.preventDefault();
    const target = document.elementFromPoint(event.changedTouches[0].clientX, event.changedTouches[0].clientY);
    if (target && target.classList.contains('blank') && currentDraggedElement) {
      target.innerHTML = currentDraggedElement.innerHTML;
      currentDraggedElement.style.visibility = "hidden";
      currentDraggedElement.classList.remove('dragging');
      currentDraggedElement = null;
    }
  }

  document.addEventListener("dragstart", drag, false);
  document.addEventListener("dragend", dragEnd, false);
  document.addEventListener("touchmove", touchMove, false);
  document.addEventListener("touchstart", touchStart, false);
  document.addEventListener("touchend", touchEnd, false);
</script>
</head>
<body>
<h3>Completa il Testo</h3>
<p>La distillazione <span class="blank" ondrop="drop(event)" ondragover="allowDrop(event)"></span> Ã¨ una tecnica di separazione di miscugli <span class="blank" ondrop="drop(event)" ondragover="allowDrop(event)"></span>.</p>
<div>
  <span id="word1" class="word" draggable="true">semplice</span>
  <span id="word2" class="word" draggable="true">omogenei</span>
</div>
</body>
</html>
